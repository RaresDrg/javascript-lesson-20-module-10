{"mappings":"IAkCAA,EA/BA,MAMEC,UACE,MAAMC,EAAM,uCAAiBC,KAAKC,+BAA+BD,KAAKE,YAOtE,OAAOC,MAAMJ,EANG,CACdK,QAAS,CACP,YAZQ,sCAiBTC,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACJR,KAAKS,gBACED,I,CAIbC,gBACET,KAAKE,WAAa,C,CAGpBQ,YACEV,KAAKE,UAAY,C,CA1BnBS,cACEX,KAAKC,YAAc,GACnBD,KAAKE,UAAY,C,GCHrB,MAAMU,EAAc,ICHL,MAObC,UAAUC,GACR,OAAOC,SAASC,cAAcF,E,CAGhCG,SACEjB,KAAKkB,OAAOC,UAAW,EACvBnB,KAAKkB,OAAOE,YAAc,W,CAG5BC,UACErB,KAAKkB,OAAOC,UAAW,EACvBnB,KAAKkB,OAAOE,YAAc,Y,CAG5BE,OACEtB,KAAKkB,OAAOK,UAAUC,IAAI,S,CAG5BC,OACEzB,KAAKkB,OAAOK,UAAUG,OAAO,S,CAzB/Bf,aAAYG,SAAEA,EAAQa,SAAEA,GAAW,IACjC3B,KAAKkB,OAASlB,KAAKa,UAAUC,GAE7Ba,GAAY3B,KAAKsB,M,GDDe,CAClCR,SAAU,eACVa,UAAU,IAGNC,EAAU,IAAI/B,EAEdgC,EAAOd,SAASe,eAAe,QAC/BC,EAAehB,SAASe,eAAe,mBAqB7C,SAASE,EAASC,GAIhB,OAHArB,EAAYa,OACZb,EAAYS,UAELO,EACJ9B,UACAO,MAAK,EAAC6B,SAAEA,KACkB,KAArBA,aAAA,EAAAA,EAAUC,QAyCpB,SAAiBF,GAGf,GAFArB,EAAYU,OAEO,WAAfW,EAAMG,KAER,MADAC,EAAmB,+BACb,IAAIC,MAAM,WAGlB,GAAmB,UAAfL,EAAMG,KACR,MAAM,IAAIE,MAAM,mB,CAjDLC,CAAQN,GAavB,SAAsBC,GAepB,OAdeA,EACZM,KAAIC,IACH,MAAMC,OAAEA,EAAMC,MAAEA,EAAKC,YAAEA,EAAW7C,IAAEA,EAAG8C,WAAEA,GAAeJ,EACxD,MAAO,yEAEuBE,8CACCD,GAAU,mCAC5BG,kEACsBD,0BACvB7C,0EAEb,IAEA+C,KAAK,G,CAxBGC,CAAab,KAGrB7B,MAAK2C,IACJX,EAAmBW,GACnBpC,EAAYK,QAAQ,IAErBgC,OAAMC,GAASC,MAAMD,I,CAqB1B,SAASb,EAAmBW,GAC1BjB,EAAaqB,WAAaJ,C,CA3D5BnB,EAAKwB,iBAAiB,UAAUpB,IAC9BA,EAAMqB,iBACN,MAAMC,EAAa1B,EAAK2B,SAASC,KAAKC,MAAMC,OAY9C,IAAgB1D,EAVK,KAAfsD,GAUUtD,EALPsD,EAMP3B,EAAQ3B,YAAcA,EACtB2B,EAAQlB,YA+CRqB,EAAaqB,UAAY,GACzBvB,EAAK+B,QArDL5B,EAASC,IANPkB,MAAM,0BAMO,IAqEjBvC,EAAYM,OAAOmC,iBAAiB,SAASpB,IAC3CD,EAASC,EAAM","sources":["src/js/NewsApi.js","src/js/01-example-1.js","src/js/LoadMoreBtn.js"],"sourcesContent":["const ENDPOINT = 'https://newsapi.org/v2/everything';\nconst KEY_API = 'c16730bd019e47b49168e3f2670f55aa';\n\nclass NewsApi {\n  constructor() {\n    this.searchQuery = '';\n    this.queryPage = 1;\n  }\n\n  getNews() {\n    const url = `${ENDPOINT}?q=${this.searchQuery}&pageSize=3&page=${this.queryPage}`;\n    const options = {\n      headers: {\n        'X-Api-Key': KEY_API,\n      },\n    };\n\n    return fetch(url, options)\n      .then(response => response.json())\n      .then(data => {\n        this.incrementPage();\n        return data;\n      });\n  }\n\n  incrementPage() {\n    this.queryPage += 1;\n  }\n\n  resetPage() {\n    this.queryPage = 1;\n  }\n}\n\nexport default NewsApi;\n","import NewsApi from './NewsApi.js';\nimport LoadMoreBtn from './LoadMoreBtn.js';\n\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '#loadMoreBtn',\n  isHidden: true,\n});\n\nconst newsApi = new NewsApi();\n\nconst form = document.getElementById('form');\nconst articlesList = document.getElementById('articlesWrapper');\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const inputValue = form.elements.news.value.trim();\n\n  if (inputValue === '') {\n    alert('Please, write something');\n    return;\n  }\n\n  setApi(inputValue);\n  clear();\n  loadData(event);\n});\n\nfunction setApi(searchQuery) {\n  newsApi.searchQuery = searchQuery;\n  newsApi.resetPage();\n}\n\nfunction loadData(event) {\n  loadMoreBtn.show();\n  loadMoreBtn.disable();\n\n  return newsApi\n    .getNews()\n    .then(({ articles }) => {\n      if (articles?.length === 0) {\n        return onError(event);\n      }\n\n      return createMarkup(articles);\n    })\n\n    .then(markup => {\n      updateArticlesList(markup);\n      loadMoreBtn.enable();\n    })\n    .catch(error => alert(error));\n}\n\nfunction createMarkup(articles) {\n  const markup = articles\n    .map(article => {\n      const { author, title, description, url, urlToImage } = article;\n      return `\n      <div class=\"article-card\">\n        <h2 class=\"article-title\">${title}</h2>\n        <h3 class=\"article-author\">${author || 'Anonym'}</h3>\n        <img src=${urlToImage} class=\"article-img\">\n        <p class=\"article-description\">${description}</p>\n        <a href=${url} class=\"article-link\" target=\"_blank\">Read more</a>\n      </div>\n    `;\n    })\n    .join('');\n  return markup;\n}\n\nfunction updateArticlesList(markup) {\n  articlesList.innerHTML += markup;\n}\n\nfunction clear() {\n  articlesList.innerHTML = '';\n  form.reset();\n}\n\nfunction onError(event) {\n  loadMoreBtn.hide();\n\n  if (event.type === 'submit') {\n    updateArticlesList('<h3>Articles not found</h3>');\n    throw new Error('No data');\n  }\n\n  if (event.type === 'click') {\n    throw new Error('No more articles');\n  }\n}\n\nloadMoreBtn.button.addEventListener('click', event => {\n  loadData(event);\n});\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden = false }) {\n    this.button = this.getButton(selector);\n\n    isHidden && this.hide();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = 'Load more';\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.button.textContent = 'Loading...';\n  }\n\n  hide() {\n    this.button.classList.add('hidden');\n  }\n\n  show() {\n    this.button.classList.remove('hidden');\n  }\n}\n"],"names":["$3336a5df7ed8ba08$export$2e2bcd8739ae039","getNews","url","this","searchQuery","queryPage","fetch","headers","then","response","json","data","incrementPage","resetPage","constructor","$56c917fd6e9a8f86$var$loadMoreBtn","getButton","selector","document","querySelector","enable","button","disabled","textContent","disable","hide","classList","add","show","remove","isHidden","$56c917fd6e9a8f86$var$newsApi","$56c917fd6e9a8f86$var$form","getElementById","$56c917fd6e9a8f86$var$articlesList","$56c917fd6e9a8f86$var$loadData","event","articles","length","type","$56c917fd6e9a8f86$var$updateArticlesList","Error","$56c917fd6e9a8f86$var$onError","map","article","author","title","description","urlToImage","join","$56c917fd6e9a8f86$var$createMarkup","markup","catch","error","alert","innerHTML","addEventListener","preventDefault","inputValue","elements","news","value","trim","reset"],"version":3,"file":"01-example-1.7f8387bb.js.map"}